(()=>{var t=document.createElement("script");let e;t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDoLvv-SV4N-eu04xRdHzGPSctSoJKhtIA&callback=initMap",t.async=!0,document.head.appendChild(t);const o=document.querySelector(".current-lat"),n=document.querySelector(".current-long"),a=document.querySelector(".current-address");function l(t){a.textContent=t}function s(t,e){o.textContent=t,n.textContent=e}window.initMap=function(){e=new google.maps.Map(document.getElementById("map"),{zoom:13,minZoom:11,center:{lat:-25.363,lng:131.044}}),axios.get("/api/stations/all").then((t=>{t.data.forEach((t=>{let o=new google.maps.Marker({position:{lat:t.latitude,lng:t.longitude},map:e,title:t.owner,address:t.address});const n=new google.maps.InfoWindow({content:`<h6 class="info-marker-title1">${t.name}</h6> <h6 class="info-marker-title2">${t.owner}</h6>`}),a=e.getCenter();s(a.lat(),a.lng()),o.addListener("click",(()=>{s(o.position.lat(),o.position.lng()),l(o.address),n.open({anchor:o,map:e,shouldFocus:!0})}))}))}));let t={};navigator.geolocation&&navigator.geolocation.getCurrentPosition((o=>{t.lat=o.coords.latitude,t.lng=o.coords.longitude,e.setCenter(t)}))},document.querySelector(".station-list");const d=document.querySelector(".station-detail");window.onload=()=>{axios.get("http://localhost:8080/api/stations/all").then((t=>{var e=t.data;for(let t=0;t<5;t++){const o=document.createElement("ul"),n=document.createElement("li"),a=document.createElement("li"),l=document.createElement("li");o.classList.add("station-list"),n.classList.add("bulletFreeList"),a.classList.add("bulletFreeList"),l.classList.add("bulletFreeList"),n.textContent=e[t].name,a.textContent=e[t].address,l.textContent=e[t].suburb,o.appendChild(n),o.appendChild(a),o.appendChild(l),d.appendChild(o)}}))},axios.get("http://localhost:8080/api/stats").then((t=>{const e=document.querySelector(".owners-table");t.data.forEach((t=>{const o=document.createElement("tr"),n=document.createElement("td"),a=document.createElement("td");n.textContent=t.owner,a.textContent=t.count,o.appendChild(n),o.appendChild(a),e.appendChild(o)}))})),(()=>{const t=document.querySelector(".tot-stations");axios.get("http://localhost:8080/api/stations/all").then((e=>{t.textContent=e.data.length}))})(),navigator.geolocation.getCurrentPosition((t=>{axios.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t.coords.latitude},${t.coords.longitude}&key=AIzaSyDoLvv-SV4N-eu04xRdHzGPSctSoJKhtIA`).then((t=>{console.log("address response is",t.data),t?.data?.results&&t.data.results.length>0&&l(t.data.results[0].formatted_address)}))}));const i=document.querySelector(".spotlight-owner"),c=document.querySelector(".spotlight-link-name"),r=document.querySelector(".spotlight-btn");var u={};function p(){axios.get("http://localhost:8080/api/stations/random").then((t=>{console.log(t),c.textContent=t.data[0].name,i.textContent=t.data[0].owner,u.lat=t.data[0].latitude,u.lng=t.data[0].longitude,u.address=t.data[0].address}))}p(),r.addEventListener("click",p),c.addEventListener("click",(function(){console.log("updating spotlight"),l(u.address),s(u.lat,u.lng),e.setCenter(u)}))})();